(()=>{"use strict";const t=document.querySelector("#content");class e{constructor(t,e,n={}){this.el=document.createElement(t),n.text&&(this.el.innerText=n.text),n.attr&&Object.keys(n.attr).forEach((t=>this.el.setAttribute(t,n.attr[t]))),n.styles&&Object.keys(n.styles).forEach((t=>this.el.style[t]=n.styles[t])),e.append(this.el)}append(t){this.el.appendChild(t)}setText(t){this.el.innerText=t}}const n=new e("div",t,{attr:{class:"header"}}),l=(new e("h1",n,{text:"Todo list"}),new e("div",t,{attr:{class:"menu"}})),o=new e("button",l,{text:"Add todo",attr:{class:"button"}}),s=new e("button",l,{text:"Add project",attr:{class:"button"}});new e("h2",l,{text:"Projects:"}),o.el.addEventListener("click",(()=>c.el.style.display="block")),s.el.addEventListener("click",(()=>r.el.style.display="block"));const a=new e("div",t,{attr:{class:"main"}}),i=new e("div",t,{attr:{class:"footer"}});new e("p",i,{text:"Footer"});const c=function(){const n=new e("div",t,{attr:{class:"dialog"},styles:{display:"none"}}),l=new e("div",n,{attr:{class:"topdiv"}});new e("p",l,{text:"Add todo"}),new e("button",l,{text:"x",attr:{class:"closebutton"}}).el.addEventListener("click",(()=>n.el.style.display="none"));const o=new e("form",n,{attr:{class:"form"}}),s=new e("div",o,{attr:{class:"inputdiv"}}),a=(new e("label",s,{text:"Title:",attr:{for:"todoinput"}}),new e("input",s,{attr:{id:"todoinput",class:"input"}}),new e("div",o,{attr:{class:"inputdiv"}})),i=(new e("label",a,{text:"Date:",attr:{for:"dateinput"}}),new e("input",a,{attr:{type:"date",id:"dateinput",class:"input"}}),new e("div",o,{attr:{class:"buttondiv inputdiv"}}));return new e("button",i,{text:"Submit",attr:{class:"button"}}),n}(),r=function(){const n=new e("div",t,{attr:{class:"dialog"},styles:{display:"none"}}),l=new e("div",n,{attr:{class:"topdiv"}});new e("p",l,{text:"Add project"}),new e("button",l,{text:"x",attr:{class:"closebutton"}}).el.addEventListener("click",(()=>n.el.style.display="none"));const o=new e("form",n,{attr:{class:"form"}}),s=new e("div",o,{attr:{class:"inputdiv"}}),a=(new e("label",s,{text:"Project name:",attr:{for:"projectinput"}}),new e("input",s,{attr:{id:"projectinput",class:"input"}}),new e("div",o,{attr:{class:"buttondiv inputdiv"}}));return new e("button",a,{text:"Submit",attr:{class:"button"}}),n}();function d(t){const n=new e("div",a,{attr:{class:"tododiv"}}),l=(new e("p",n,{text:`Title: ${t.todo}`}),new e("p",n,{text:`Date: ${t.date}`}),new e("div",n,{attr:{class:"todobuttons"}})),o=(new e("button",l,{text:t.done?"Done":"Not done yet",attr:{class:"button todobutton"}}),new e("button",l,{text:`Delete ${t.todo.length>8?"task":t.todo}`,attr:{class:"button todobutton"}}),new e("div",n,{styles:{display:"none"}}));return new e("textarea",o),n}function u(t){const n=new e("button",l,{text:t,attr:{class:"button projectbutton"}});return new e("button",n,{text:"x",attr:{class:"delproject"}}).el.addEventListener("click",(t=>{l.el.removeChild(t.target.parentNode)})),n}function p(t){l.el.querySelectorAll(".projectbutton").forEach((t=>t.style.outline="")),t.el.style.outline="2px solid #333"}let v="default";class h{constructor(t,e){this.todo=t,this.date=e,this.done=!1}}let w={default:{}};function b(){localStorage.setItem("projects",JSON.stringify(w))}const y=u("Default todo's");function f(t){const e=u(t);e.el.addEventListener("click",(()=>{x(t,e)})),e.el.children[0].addEventListener("click",(e=>{e.stopPropagation(),delete w[t],b(),t===v&&x("default",y)}))}function x(t,e){!function(t){v=t}(t),Object.values(a.el.children).forEach((t=>a.el.removeChild(t))),Object.values((localStorage.getItem("projects")&&(w=JSON.parse(localStorage.getItem("projects"))),w[v])).forEach((t=>{E(d(t),t)})),p(e)}function E(t,e){let n=!1;const l=t.el.children[3];l.addEventListener("click",(t=>t.stopPropagation())),l.children[0].addEventListener("keyup",(()=>{e.description=l.children[0].value,b()})),t.el.addEventListener("click",(()=>{n?(n=!1,l.style.display="none",l.children[0].value=""):(e.description&&(l.children[0].value=e.description),n=!0,l.style.display="block")})),t.el.children[2].children[0].addEventListener("click",(t=>{var n;(n=e).done=!n.done,b(),t.stopPropagation(),t.target.innerText=e.done?"Done":"Not done yet"})),t.el.children[2].children[1].addEventListener("click",(()=>{var n;n=e.todo,delete w[v][n],b(),t.el.remove()}))}y.el.removeChild(y.el.children[0]),y.el.addEventListener("click",(()=>{x("default",y)})),x("default",y),p(y),Object.keys((localStorage.getItem("projects")&&(w=JSON.parse(localStorage.getItem("projects"))),w)).forEach((t=>{"default"!=t&&f(t)})),c.el.children[1][2].addEventListener("click",(t=>{t.preventDefault();const e=c.el.children[1][0].value,n=c.el.children[1][1].value;if(e&&n){const t=function(t,e){return w[v][t]=new h(t,e),b(),w[v][t]}(e,n);E(d(t),t),c.el.style.display="none",c.el.children[1][0].value="",c.el.children[1][1].value=""}else alert("Enter todo title and date!")})),r.el.children[1][1].addEventListener("click",(t=>{t.preventDefault();const e=r.el.children[1][0].value;e?(w[e]={},b(),f(e),r.el.children[1][0].value="",r.el.style.display="none"):alert("Enter project name!")}))})();