(()=>{"use strict";const t=document.querySelector("#content");class e{constructor(t,e,n){this.el=document.createElement(t),n.text&&(this.el.innerText=n.text),n.attr&&Object.keys(n.attr).forEach((t=>this.el.setAttribute(t,n.attr[t]))),n.styles&&Object.keys(n.styles).forEach((t=>this.el.style[t]=n.styles[t])),e.append(this.el)}append(t){this.el.appendChild(t)}setText(t){this.el.innerText=t}}const n=new e("div",t,{attr:{class:"header"}}),l=(new e("h1",n,{text:"Todo list"}),new e("div",t,{attr:{class:"menu"}})),o=new e("button",l,{text:"Add todo",attr:{class:"button"}}),s=new e("button",l,{text:"Add project",attr:{class:"button"}});new e("h2",l,{text:"Projects:"}),o.el.addEventListener("click",(()=>d.el.style.display="block")),s.el.addEventListener("click",(()=>c.el.style.display="block"));const i=new e("div",t,{attr:{class:"main"}}),a=new e("div",t,{attr:{class:"footer"}});new e("p",a,{text:"Footer"});const d=function(){const n=new e("div",t,{attr:{class:"dialog"},styles:{display:"none"}}),l=new e("div",n,{attr:{class:"topdiv"}});new e("p",l,{text:"Add todo"}),new e("button",l,{text:"x",attr:{class:"closebutton"}}).el.addEventListener("click",(()=>n.el.style.display="none"));const o=new e("form",n,{attr:{class:"form"}}),s=new e("div",o,{attr:{class:"inputdiv"}}),i=(new e("label",s,{text:"Title:",attr:{for:"todoinput"}}),new e("input",s,{attr:{id:"todoinput",class:"input"}}),new e("div",o,{attr:{class:"inputdiv"}})),a=(new e("label",i,{text:"Date:",attr:{for:"dateinput"}}),new e("input",i,{attr:{type:"date",id:"dateinput",class:"input"}}),new e("div",o,{attr:{class:"buttondiv inputdiv"}}));return new e("button",a,{text:"Submit",attr:{class:"button"}}),n}(),c=function(){const n=new e("div",t,{attr:{class:"dialog"},styles:{display:"none"}}),l=new e("div",n,{attr:{class:"topdiv"}});new e("p",l,{text:"Add project"}),new e("button",l,{text:"x",attr:{class:"closebutton"}}).el.addEventListener("click",(()=>n.el.style.display="none"));const o=new e("form",n,{attr:{class:"form"}}),s=new e("div",o,{attr:{class:"inputdiv"}}),i=(new e("label",s,{text:"Project name:",attr:{for:"projectinput"}}),new e("input",s,{attr:{id:"projectinput",class:"input"}}),new e("div",o,{attr:{class:"buttondiv inputdiv"}}));return new e("button",i,{text:"Submit",attr:{class:"button"}}),n}();function r(t){const n=new e("div",i,{attr:{class:"tododiv"}}),l=(new e("p",n,{text:`Title: ${t.todo}`}),new e("p",n,{text:`Date: ${t.date}`}),new e("div",n,{attr:{class:"todobuttons"}}));return new e("button",l,{text:t.done?"Done":"Not done yet",attr:{class:"button todobutton"}}),new e("button",l,{text:`Delete ${t.todo.length>8?"task":t.todo}`,attr:{class:"button todobutton"}}),n}function u(t){const n=new e("button",l,{text:t,attr:{class:"button projectbutton"}});return new e("button",n,{text:"x",attr:{class:"delproject"}}).el.addEventListener("click",(t=>{l.el.removeChild(t.target.parentNode)})),n}function p(t){l.el.querySelectorAll(".projectbutton").forEach((t=>t.style.outline="")),t.el.style.outline="2px solid #333"}let v="default";class w{constructor(t,e){this.todo=t,this.date=e,this.done=!1}}let h={default:{}};d.el.children[1][2].addEventListener("click",(t=>{t.preventDefault();const e=d.el.children[1][0].value,n=d.el.children[1][1].value;if(e&&n){const t=function(t,e){return h[v][t]=new w(t,e)}(e,n);f(r(t),t),d.el.style.display="none",d.el.children[1][0].value="",d.el.children[1][1].value=""}else alert("Enter todo title and date!")})),c.el.children[1][1].addEventListener("click",(t=>{t.preventDefault();const e=c.el.children[1][0].value;if(e){h[e]={};const t=u(e);t.el.addEventListener("click",(()=>{y(e,t)})),t.el.children[0].addEventListener("click",(t=>{t.stopPropagation(),delete h[e],e===v&&y("default",b)})),c.el.children[1][0].value="",c.el.style.display="none"}else alert("Enter project name!")}));const b=u("Default todo's");function y(t,e){!function(t){v=t}(t),Object.values(i.el.children).forEach((t=>i.el.removeChild(t))),Object.values(h[v]).forEach((t=>{f(r(t),t)})),p(e)}function f(t,n){let l=!1;const o=function(t){const n=new e("div",t,{});return new e("textarea",n,{}),n}(t);o.el.style.display="none",o.el.addEventListener("click",(t=>t.stopPropagation())),o.el.children[0].addEventListener("keyup",(()=>n.description=o.el.children[0].value)),t.el.addEventListener("click",(()=>{l?(l=!1,o.el.style.display="none",o.el.children[0].value=""):(n.description&&(o.el.children[0].value=n.description),l=!0,o.el.style.display="block")})),t.el.children[2].children[0].addEventListener("click",(t=>{var e;(e=n).done=!e.done,t.stopPropagation(),t.target.innerText=n.done?"Done":"Not done yet"})),t.el.children[2].children[1].addEventListener("click",(()=>{var e;e=n.todo,delete h[v][e],t.el.remove()}))}b.el.removeChild(b.el.children[0]),p(b),b.el.addEventListener("click",(()=>{y("default",b)}))})();